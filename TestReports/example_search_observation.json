{
  "id": "testscript-example-search-observation",
  "language": {
    "system": "http://hl7.org/fhir/ValueSet/languages",
    "code": "en"
  },
  "name": "TestReport Example Search Observation",
  "status": "completed",
  "testScript": {
    "reference": "../TestScripts/search_test_script_obs.json"
  },
  "result": "fail",
  "score": 72.22,
  "tester": "The MITRE Corporation",
  "issued": "2022-05-11T23:27:51-06:00",
  "setup": {
    "action": [
      {
        "operation": {
          "result": {
            "system": "http://hl7.org/fhir/ValueSet/report-action-result-codes",
            "code": "pass"
          }
        }
      },
      {
        "assert": {
          "result": {
            "system": "http://hl7.org/fhir/ValueSet/report-action-result-codes",
            "code": "pass"
          }
        }
      },
      {
        "assert": {
          "result": {
            "system": "http://hl7.org/fhir/ValueSet/report-action-result-codes",
            "code": "pass"
          }
        }
      },
      {
        "assert": {
          "result": {
            "system": "http://hl7.org/fhir/ValueSet/report-action-result-codes",
            "code": "pass"
          }
        }
      },
      {
        "assert": {
          "result": {
            "system": "http://hl7.org/fhir/ValueSet/report-action-result-codes",
            "code": "fail"
          },
          "message": "[.assert_navigation_links] Bundle resource does not contain first, last, and next links as expected."
        }
      }
    ]
  },
  "test": [
    {
      "name": "Observation Create Search",
      "description": "Create a Observation resource and capture the returned HTTP Header Location. Then search for (read) that Observation using the Location URL value and validate the response.",
      "action": [
        {
          "operation": {
            "result": {
              "system": "http://hl7.org/fhir/ValueSet/report-action-result-codes",
              "code": "pass"
            }
          }
        },
        {
          "assert": {
            "result": {
              "system": "http://hl7.org/fhir/ValueSet/report-action-result-codes",
              "code": "pass"
            }
          }
        },
        {
          "assert": {
            "result": {
              "system": "http://hl7.org/fhir/ValueSet/report-action-result-codes",
              "code": "pass"
            }
          }
        },
        {
          "operation": {
            "result": {
              "system": "http://hl7.org/fhir/ValueSet/report-action-result-codes",
              "code": "pass"
            }
          }
        },
        {
          "assert": {
            "result": {
              "system": "http://hl7.org/fhir/ValueSet/report-action-result-codes",
              "code": "pass"
            }
          }
        },
        {
          "assert": {
            "result": {
              "system": "http://hl7.org/fhir/ValueSet/report-action-result-codes",
              "code": "pass"
            }
          }
        }
      ]
    },
    {
      "name": "Observation Search Dynamic",
      "description": "Search for Observation resources using the user defined dynamic variables ${ObservationSearchCode} and ${ObservationSearchStatus} and validate response.",
      "action": [
        {
          "operation": {
            "result": {
              "system": "http://hl7.org/fhir/ValueSet/report-action-result-codes",
              "code": "pass"
            }
          }
        },
        {
          "assert": {
            "result": {
              "system": "http://hl7.org/fhir/ValueSet/report-action-result-codes",
              "code": "fail"
            },
            "message": "[.assert_response] Expected 200 but found 400."
          }
        },
        {
          "assert": {
            "result": {
              "system": "http://hl7.org/fhir/ValueSet/report-action-result-codes",
              "code": "pass"
            }
          }
        },
        {
          "assert": {
            "result": {
              "system": "http://hl7.org/fhir/ValueSet/report-action-result-codes",
              "code": "fail"
            },
            "message": "[.assert_resource] Expected Bundle but found OperationOutcome."
          }
        },
        {
          "assert": {
            "result": {
              "system": "http://hl7.org/fhir/ValueSet/report-action-result-codes",
              "code": "warning"
            },
            "message": "badValidation"
          }
        },
        {
          "assert": {
            "result": {
              "system": "http://hl7.org/fhir/ValueSet/report-action-result-codes",
              "code": "fail"
            },
            "message": "[.assert_path] Expected searchset but found nothing."
          }
        },
        {
          "assert": {
            "result": {
              "system": "http://hl7.org/fhir/ValueSet/report-action-result-codes",
              "code": "fail"
            },
            "message": "[.assert_expression] Invalid Expression: Bundle.total.toInteger() >= entry.count(). Valid FHIRPath Expression is required."
          }
        }
      ]
    }
  ],
  "resourceType": "TestReport"
}